---
{"dg-publish":true,"permalink":"/app-introduction/pleebula/","dgHomeLink":true,"dgPassFrontmatter":false}
---


##  why
---
-   일하면서 듣는 플레이리스트(이하 플리)에 흥이 차서 퇴근길에 노래방에 갔다. 플리에 나오는 곡들을 하나하나 검색하면서 노래하는 게 참 번거로웠다.
-   특히 J-POP을 자주 듣는 나는, 플리에 있는 일본곡들을 일일이 복붙해서 검색해봐야 했다.
-   애초에 노래방 소프트웨어에서 비슷한 곡을 추천한다거나 일어입력기가 있었다면 좋았겠지만, 30년째 발전하지 않는 노래방 기기.
-   ~~오타쿠는 더이상 참을 수 없었다.~~

   
##  Concept
---
-   **<플리불러>**는 유튜브 플레이리스트에 있는 노래들을 노래방 번호로 뽑아낸다.
-   [TODO] 노래번호 책갈피, 플리 저장 등으로 정보를 개인화할 수 있다.
-   [TODO] 유저들의 인기 검색 플리 등을 수집하여 노래방 기기와는 별도의 인기순위를 제공한다.


## Simple Scenario
---
-   유튜브에서 플레이리스트 검색 > 플레이리스트의 음악 수집 > 노래방 정보로 추출하여 리스팅 

   
## How To
---
1. 유튜브 플레이리스트에는 사용된 음악 메타를 표출하는 컴포넌트가 있다. 여기서 내용을 긁어 추출한 음악들의 가수명과 노래 제목을 수집한다.
2. 수집한 노래 정보로 네이버 노래방 검색을 한다. (태진이나 금영의 공식 홈페이지 검색을 사용할 수도 있었으나 공홈의 상태가 매우 나쁘다. 공식 API 없나 하고 찾아봤으나 API는커녕 공홈부터 제대로 동작 안 하더라.)
3. 한마디로 다 웹에서 긁어온다는 이야기.


## Remarkable
---
-   상술했듯이 오타쿠라 일본곡 검색에 신경을 썼다.   
-   유튜브의 노래 제목과 노래방의 노래 제목은 간극이 있다. 영문으로만 표기하는 경우가 많다.
> (예) ZUTOMAYO - Byoushinwo Kamu
-   네이버 노래방 검색은 대히트곡인 `Kenshi Yonezu - Lemon` 조차 이해하지 못해서  팝가수인줄 알고 `lemon tree`(!)를 내뿜는다.
-   이런 식의 일본곡들은 웹에서 한자를 긁어와서 재검색하고 `米津 玄師 - Lemon`이 나오게끔 처리했다.
-   이래도 영문 표기와의 간극이 있는 가수명, 노래 제목은 검색어 치환 키트를 서버에 만들어 치환 후 검색하게 했다.(무식한 방법이지만 다른 수가 없다.)


## Limitations
---
-   플레이리스트에 50곡이 있든 100곡이 있든 딱 <u>**상위 10개곡**</u>만 추출할 수 있다. 이는 유튜브가 메타를 상위 10곡만 제공하기 때문이다. 이 메타도 최근에 생긴 거라 추후 전곡 노출로 변경될 수도 있다. 변경되면 빠르게 반영하겠다.
-   반대로 유튜브가 메타를 제공하지 않게 되면 앱이 기능하지 않게 된다. *유튜브의 음악 메타 노출 정책에 100% 기대고 있다.*
-   노래의 영문 제목과 원제가 지나치게 다르면 추출되지 않는다. 예를 들어 `Nct dream - Hot sauce`는 정상 추출되지 않는다. (NCT곡들 가져오다가 얻어걸릴 수는 있다.)  한때 유튜브 뮤직은 영문 제목만 제공하였으나 요새는 병기하는 (`NCT Dream - 맛 Hot sauce`) 식으로 수정되어서 웬만한 대중음악은 문제가 없을 거라 생각된다.
   
   
## Dev Story
---
-   `kotlin`, `mvvm`, `JSoup`, `Firebase`, `retrofit`, `youtube data v3` 
-   개인화 기능을 넣지 않는 버전의 소스는 공개한다. 무식하게 긁어와서 구조가 한눈에 보이기 때문에 유튜브 음악 메타 구조가 알고 싶은 사람은 매우 참고가 될 것이다.
	-  Github :
-   `JSoup`은 웹사이트가 랜더링되기 전의 소스코드를 긁어오는데 이때 유튜브 음악 메타가 엄청나게 긴 json값에 있어서 정규식으로 뽑아냈다. 네이버 검색은 DOM을 그대로 쓸 수 있다.
-   요청이 있다면 아이폰용도 만들 수 있겠으나 일단 내가 쓸 거라 내 갤럭시용으로만 빠르게 만들고 디벨롭에 신경쓸 예정이다.



