why
---

- 선물받은 기프티콘 맨날 안 쓰고 유통기한이 지난다.
- 선물받은 건 카톡으로 알림이라도 오지 당근마켓에 산 기프티콘이나 경품으로 문자로 받은 기프티콘은 알림도 없이 날린다.
- 바탕화면에 기프티콘을 띄워놓고 바로 바코드를 찍게 하고 싶다.


Concept
---

-   <픽셀프Picshelf>는 아주 심플한 사진 위젯 앱이다.
- 간단하게 프레임을 씌우거나 사진 이름을 노출할 수 있다. 
- 앱 이름은 책장을 뜻하는 Bookshelf에서 따와서 사진장이라는 뉘앙스로 지었다.
   

Simple Scenario
---

-   스마트폰 바탕화면 롱클릭하여 위젯 추가 > 픽셀프 선택 > 사진 선택 후 재배치 및 크기 조절   
   

How To
---

-   유튜브 플리에는 사용된 음악 메타를 표출하는 컴포넌트가 있다.
-   여기서 내용을 긁어 추출한 음악들을 네이버 노래방 검색으로 번호를 찾는다.
-   (태진이나 금영의 공식 홈페이지 검색을 사용할 수도 있었으나 공홈의 상태가 매우 나쁘다. 공식 API 없나 하고 찾아봤으나 API는커녕 공홈부터 제대로 동작 안 하더라.)
-   한마디로 다 웹에서 긁어온다는 이야기.


Remarkable
---

-   상술했듯이 오타쿠라 일본곡 검색에 신경을 썼다.
-   유튜브의 음악 제목과 노래방의 음악 제목은 간극이 있다. 영문으로만 표기하는 경우가 많다.
> [예시]
> - 유튜브 :  ZUTOMAYO - Byoushinwo Kamu
> - 노래방 : 宿題を噛む / ずっと真夜中でいいのに。

네이버 노래방 검색은 대히트곡인 `Kenshi Yonezu - Lemon` 조차 이해하지 못해서  팝가수인줄 알고 `lemon tree`(!)를 내뿜는다.
-   이런 식의 일본곡들은 웹에서 한자를 긁어와서 재검색하고 `米津 玄師 - Lemon`이 나오게끔 처리했다.
-   코드 상에서 국적 등이 구분이 어려운 친구들은 검색어 치환 키트를 서버에 저장해서 치환해준다. 

>  BOL4 -> 볼빨간사춘기`
    

Limitation
---

-   플레이리스트에 50곡이 있든 100곡이 있든 딱 <u>**상위 10개곡**</u>만 추출할 수 있다. 이는 유튜브가 메타를 상위 10곡만 제공하기 때문이다. 이 메타도 최근에 생긴 거라 추후 전곡 노출로 변경될 수도 있다. 변경되면 빠르게 반영하겠다.
-   반대로 유튜브가 메타를 제공하지 않게 되면 앱이 기능하지 않게 된다. *유튜브의 음악 메타 노출 정책에 100% 기대고 있다.**
-  노래방 검색 성능이 안  좋아서 못 찾는 경우도 있다. 치환  키트로 방법을 모색했으나 안  되더라.
> `레드 벨벳 - Feel my rhythm`은 노래방 DB 그대로 써서 검색해도 번호가 3, 4페이지에 나오는데 3, 4페이지까지 뒤지는 방법이 있긴 하지만 성능을 위해 그냥 포기했다.



Dev Story
---

-   `Kotlin`, `MVVM`, `JSoup`, `Firebase`, `Retrofit`, `Youtube data v3`
- 최초 소스만 공개한다. (유지보수 하다가 API key 등이 실수로 노출될까봐)
- Github :
- 무식하게 긁어와서 구조가 한눈에 보이기 때문에 유튜브 음악 메타를 쓰려는 사람은 매우 참고가 될 것이다.
-   `JSoup`은 랜더링되기 전 소스코드를 긁어오는데 이때 유튜브 음악 메타가 엄청나게 긴 json값에 있어서 정규식으로 뽑아냈다. 네이버 검색은 DOM을 그대로 쓸 수 있다.
-   요청이 많다면 아이폰용도 만들 수 있겠으나 일단 내가 쓸 거라 내 갤럭시용으로만 빠르게 만들고 디벨롭할 예정이다. 

