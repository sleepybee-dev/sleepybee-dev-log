import re

def solution(new_id):
    #1
    result = new_id.lower()
    
    #2
    list = re.findall("[a-z0-9_.-]*", result)
    foundText = ""
    for item in list:
        foundText = foundText + item
    result = foundText
    
    #3
    result = re.sub("[.]+", ".", result)
    
    #4
    result = removeFullStop(result)

    #5
    if len(result) == 0:
        result = "a"
    
    #6
    if len(result) >= 16:
        result = result[0:15]
        result = removeFullStop(result)
    
    #7
    if len(result) <= 2:
        result = result.ljust(3, result[-1])
              
    return result

def removeFullStop(value):
    result = value
    # if value[0] == ".":
        # if len(value) <= 1:
        #     value = ""
        # else : value = value[1:]
    if value[-1] == ".":
        value = value[0:-2]
    return result